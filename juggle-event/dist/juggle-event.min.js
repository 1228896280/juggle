!function(t){t.juggle||(t.juggle={});var e=t.juggle.tools;t.juggle.Event=function(t,n,i){this.mTarget=null,this.mCurrentTarget=null,this.mType=null,this.mBubbles=null,this.mStopsPropagation=null,this.mStopsImmediatePropagation=null,this.mData=null,this.stopPropagation=function(){this.mStopsPropagation=!0},this.stopImmediatePropagation=function(){this.mStopsPropagation=this.mStopsImmediatePropagation=!0},this.reset=function(t,n,i){return e.isNull(n)&&(n=!1),e.isNull(i)&&(i=null),this.mType=t,this.mBubbles=n,this.mData=i,this.mTarget=this.mCurrentTarget=null,this.mStopsPropagation=this.mStopsImmediatePropagation=!1,this},this.reset(t,n,i)}}(window),function(t){t.juggle||(t.juggle={});var e=t.juggle.Event;t.juggle.eventPool=new function(){this.sEventPool=[],this.fromPool=function(t,n,i){return this.sEventPool.length?this.sEventPool.pop().reset(t,n,i):new e(t,n,i)},this.toPool=function(t){t.mData=t.mTarget=t.mCurrentTarget=null,this.sEventPool[this.sEventPool.length]=t}}}(window),function(t){t.juggle||(t.juggle={});var e=t.juggle.eventPool,n=t.juggle.tools,i=[],s=[];t.juggle.EventDispatcher=function(){this.mEventListeners=null,this.isEventDispatcher=!0,this.addEventListener=function(t,e,i){n.isNull(this.mEventListeners)&&(this.mEventListeners=[]);var o=this.mEventListeners[t];n.isNull(o)?(this.mEventListeners[t]=[e],s[e]=i):-1===n.indexOf(o,e)&&(o.push(e),s[e]=i)},this.removeEventListener=function(t,e){if(this.mEventListeners){var n=this.mEventListeners[t],i=n?n.length:0;if(i>0){for(var s=0,o=[],l=0;l<i;++l){var r=n[l];r!==e&&(o[s++]=r)}this.mEventListeners[t]=o}}},this.removeEventListeners=function(t){t&&this.mEventListeners?delete this.mEventListeners[t]:this.mEventListeners=null},this.dispatchEvent=function(t){var e=t.mBubbles;if(e||!n.isNull(this.mEventListeners)&&t.mType in this.mEventListeners){var i=t.mTarget;t.mTarget=this,e&&this.isDisplayObject?this.bubbleEvent(t):this.invokeEvent(t),i&&(t.mTarget=i)}},this.invokeEvent=function(t){var e=this.mEventListeners?this.mEventListeners[t.mType]:null,i=n.isNull(e)?0:e.length;if(i){t.mCurrentTarget=this;for(var o=0;o<i;++o){var l=e[o],r=l.length;if(0===r?l.call(s[l]):1===r?l.call(s[l],t):l.call(s[l],t,t.mData),t.mStopsImmediatePropagation)return!0}return t.mStopsPropagation}return!1},this.bubbleEvent=function(t){var e,s=this,o=1;for(i.length>0?(e=i.pop())[0]=s:e=[s];!n.isNull(s=s.parent);)e[o++]=s;for(var l=0;l<o&&!e[l].invokeEvent(t);++l);e.length=0,i.push(e)},this.dispatchEventWith=function(t,i,s){if(n.isNull(i)&&(i=!1),n.isNull(s)&&(s=null),i||this.hasEventListener(t)){var o=e.fromPool(t,i,s);this.dispatchEvent(o),e.toPool(o)}},this.hasEventListener=function(t){var e=this.mEventListeners?this.mEventListeners[t]:null;return!!e&&0!==e.length}}}(window);